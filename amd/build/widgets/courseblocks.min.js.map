{"version":3,"file":"courseblocks.min.js","sources":["../../src/widgets/courseblocks.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Cohorts Info widgets.\n *\n * @module     report_lmsace_reports/courseblocks\n * @copyright  2023 LMSACE <https://lmsace.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'report_lmsace_reports/widgets/enroll_completion',\n    'report_lmsace_reports/widgets/enroll_completion_month',\n    'report_lmsace_reports/widgets/coursestatus',\n    'core/chartjs',\n], function (enrollCompletion, enrollCompletionMonth, courseStatus) {\n\n    /* global courseactiveinactiveusers, coursehighscore */\n\n    var courseBlocks = {\n\n        enrollCompletion: {\n            func: enrollCompletion\n        },\n        enrollCompletionMonth: {\n            func: enrollCompletionMonth\n        },\n        courseStatus: {\n            func: courseStatus\n        },\n    };\n\n    var loadCharts = function (main) {\n        showActiveInactiveUsersChart(main);\n        showHighScoreCourse(main);\n        for (var key in courseBlocks) {\n            courseBlocks[key].func.init(main);\n        }\n    };\n\n    var showHighScoreCourse = function (main) {\n        let ctx = document.getElementById('high-score-course-chart');\n        if (ctx) {\n\n            let type = 'bar';\n            var bgColor = main.getRandomColors(['c2']); // Get bg color with opaticty.\n            var customConfig = {\n                data: { datasets: [{ label: coursehighscore.strscore }] },\n                options: {\n                    plugins: {\n                        datalabels: {\n                            backgroundColor: false,\n                            borderWidth: 2,\n                            borderColor: function (context) {\n                                return context.dataset.backgroundColor;\n                            },\n                            color: function (context) {\n                                return context.dataset.backgroundColor;\n                            }\n                        }\n                    }\n                }\n            };\n\n            main.buildChart(ctx, type, coursehighscore.label, coursehighscore.score, bgColor, customConfig, null);\n\n        }\n    };\n\n    var showActiveInactiveUsersChart = function (main) {\n\n        let ctx = document.getElementById('active-inactive-users-chart');\n        if (ctx) {\n\n            let type = 'line';\n            var bgColor = main.getRandomColors(['c7'], '.5', true); // Get bg color with opaticty.\n            var borderColor = main.getRandomColors(['c7']); // Get border color without opaticty.\n\n            var bgColor2 = main.getRandomColors(['c4'], '.5', true); // Get bg color with opaticty.\n            var borderColor2 = main.getRandomColors(['c4']); // Get border color without opaticty.\n\n            var options = main.getMultiDatasetOptions();\n            options.maintainAspectRatio = false;\n\n            var customConfig = {\n                options: options,\n                data: {\n                    datasets: [{\n                        label: courseactiveinactiveusers.activeusers,\n                        data: courseactiveinactiveusers.activeusers_data,\n                        backgroundColor: bgColor,\n                        borderColor: borderColor,\n                        datalabels: {\n                            align: 240,\n                        }\n                    },\n                    {\n                        label: courseactiveinactiveusers.inactiveusers,\n                        data: courseactiveinactiveusers.inactiveusers_data,\n                        backgroundColor: bgColor2,\n                        borderColor: borderColor2,\n                        fill: true,\n                        datalabels: {\n                            align: -45,\n                        }\n                    }]\n                }\n            };\n\n            main.buildChart(ctx, type, courseactiveinactiveusers.label, null, null, customConfig);\n        }\n\n    };\n\n    return {\n        init: function (main) {\n            loadCharts(main);\n        }\n    };\n});\n"],"names":["define","enrollCompletion","enrollCompletionMonth","courseStatus","courseBlocks","func","showHighScoreCourse","main","ctx","document","getElementById","type","bgColor","getRandomColors","customConfig","data","datasets","label","coursehighscore","strscore","options","plugins","datalabels","backgroundColor","borderWidth","borderColor","context","dataset","color","buildChart","score","showActiveInactiveUsersChart","bgColor2","borderColor2","getMultiDatasetOptions","maintainAspectRatio","courseactiveinactiveusers","activeusers","activeusers_data","align","inactiveusers","inactiveusers_data","fill","init","key","loadCharts"],"mappings":";;;;;;;AAuBAA,oDAAO,CACH,kDACA,wDACA,6CACA,iBACD,SAAUC,iBAAkBC,sBAAuBC,kBAI9CC,aAAe,CAEfH,iBAAkB,CACdI,KAAMJ,kBAEVC,sBAAuB,CACnBG,KAAMH,uBAEVC,aAAc,CACVE,KAAMF,eAYVG,oBAAsB,SAAUC,UAC5BC,IAAMC,SAASC,eAAe,8BAC9BF,IAAK,KAEDG,KAAO,UACPC,QAAUL,KAAKM,gBAAgB,CAAC,OAChCC,aAAe,CACfC,KAAM,CAAEC,SAAU,CAAC,CAAEC,MAAOC,gBAAgBC,YAC5CC,QAAS,CACLC,QAAS,CACLC,WAAY,CACRC,iBAAiB,EACjBC,YAAa,EACbC,YAAa,SAAUC,gBACZA,QAAQC,QAAQJ,iBAE3BK,MAAO,SAAUF,gBACNA,QAAQC,QAAQJ,qBAO3ChB,KAAKsB,WAAWrB,IAAKG,KAAMO,gBAAgBD,MAAOC,gBAAgBY,MAAOlB,QAASE,aAAc,QAKpGiB,6BAA+B,SAAUxB,UAErCC,IAAMC,SAASC,eAAe,kCAC9BF,IAAK,KAEDG,KAAO,WACPC,QAAUL,KAAKM,gBAAgB,CAAC,MAAO,MAAM,GAC7CY,YAAclB,KAAKM,gBAAgB,CAAC,OAEpCmB,SAAWzB,KAAKM,gBAAgB,CAAC,MAAO,MAAM,GAC9CoB,aAAe1B,KAAKM,gBAAgB,CAAC,OAErCO,QAAUb,KAAK2B,yBACnBd,QAAQe,qBAAsB,MAE1BrB,aAAe,CACfM,QAASA,QACTL,KAAM,CACFC,SAAU,CAAC,CACPC,MAAOmB,0BAA0BC,YACjCtB,KAAMqB,0BAA0BE,iBAChCf,gBAAiBX,QACjBa,YAAaA,YACbH,WAAY,CACRiB,MAAO,MAGf,CACItB,MAAOmB,0BAA0BI,cACjCzB,KAAMqB,0BAA0BK,mBAChClB,gBAAiBS,SACjBP,YAAaQ,aACbS,MAAM,EACNpB,WAAY,CACRiB,OAAQ,QAMxBhC,KAAKsB,WAAWrB,IAAKG,KAAMyB,0BAA0BnB,MAAO,KAAM,KAAMH,sBAKzE,CACH6B,KAAM,SAAUpC,OAnFH,SAAUA,UAGlB,IAAIqC,OAFTb,6BAA6BxB,MAC7BD,oBAAoBC,MACJH,aACZA,aAAawC,KAAKvC,KAAKsC,KAAKpC,MAgF5BsC,CAAWtC"}