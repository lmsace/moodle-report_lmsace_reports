{"version":3,"file":"userblocks.min.js","sources":["../../src/widgets/userblocks.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User blocks - chart init.\n *\n * @module     report_lmsace_reports/userblocks\n * @copyright  2023 LMSACE <https://lmsace.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'report_lmsace_reports/widgets/user_cohorts_groups',\n    'report_lmsace_reports/widgets/user_mostvisitcourses', 'core/chartjs'\n], function ($, userCohortsGroups, userMostVisitsCourses, Chart) {\n\n    /* global userscore */\n\n    var userBlocks = {\n\n        userCohortsGroups: {\n            func: userCohortsGroups\n        },\n        userMostVisitsCourses: {\n            func: userMostVisitsCourses\n        }\n    };\n\n    /**\n     * Initialize the chart of users.\n     *\n     * @param {Array} main\n     */\n    function init(main) {\n        showUserscoreChart(main);\n\n        for (let key in userBlocks) {\n            userBlocks[key].func.init(main);\n        }\n    }\n\n    var showUserscoreChart = function (main) {\n\n        let ctx = document.getElementById('user-score-chart');\n        if (ctx) {\n            let config = {\n                type: 'bar',\n                data: {\n                    labels: userscore.label,\n                    datasets: [{\n                        label: '',\n                        data: userscore.value,\n                        backgroundColor: main.getRandomColors(['c7']),\n                        showTooltips: false,\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    plugins: {\n                        legend: {\n                            position: 'top',\n                        },\n                        title: {\n                            display: true,\n                            text: '',\n                        }\n                    },\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                        },\n                        x: {\n                            barThickness: 2, // Number (pixels) or 'flex'\n                            maxBarThickness: 3 // Number (pixels)\n                        }\n                    }\n                },\n            };\n            new Chart(ctx, config);\n        }\n    };\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","userCohortsGroups","userMostVisitsCourses","Chart","userBlocks","func","showUserscoreChart","main","ctx","document","getElementById","config","type","data","labels","userscore","label","datasets","value","backgroundColor","getRandomColors","showTooltips","options","responsive","plugins","legend","position","title","display","text","scales","y","beginAtZero","x","barThickness","maxBarThickness","init","key"],"mappings":";;;;;;;AAuBAA,kDAAO,CAAC,SAAU,oDACd,sDAAuD,iBACxD,SAAUC,EAAGC,kBAAmBC,sBAAuBC,WAIlDC,WAAa,CAEbH,kBAAmB,CACfI,KAAMJ,mBAEVC,sBAAuB,CACnBG,KAAMH,4BAiBVI,mBAAqB,SAAUC,UAE3BC,IAAMC,SAASC,eAAe,uBAC9BF,IAAK,KACDG,OAAS,CACTC,KAAM,MACNC,KAAM,CACFC,OAAQC,UAAUC,MAClBC,SAAU,CAAC,CACPD,MAAO,GACPH,KAAME,UAAUG,MAChBC,gBAAiBZ,KAAKa,gBAAgB,CAAC,OACvCC,cAAc,KAGtBC,QAAS,CACLC,YAAY,EACZC,QAAS,CACLC,OAAQ,CACJC,SAAU,OAEdC,MAAO,CACHC,SAAS,EACTC,KAAM,KAGdC,OAAQ,CACJC,EAAG,CACCC,aAAa,GAEjBC,EAAG,CACCC,aAAc,EACdC,gBAAiB,UAK7BhC,MAAMK,IAAKG,gBAIhB,CACHyB,cAlDU7B,MACVD,mBAAmBC,UAEd,IAAI8B,OAAOjC,WACZA,WAAWiC,KAAKhC,KAAK+B,KAAK7B"}