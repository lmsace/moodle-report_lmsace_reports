/**
 * User most visits courses - chart init.
 *
 * @module     report_lmsace_reports/user_mostvisitcourses
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/user_mostvisitcourses",["jquery","core/ajax","core/loadingicon"],(function($,AJAX,LoadIcon){var chartReport=null,loadiconElement=$(".user-visits-course-block .loadiconElement");var showMostVisitsCourses=function(main){let ctx=document.getElementById("user-visits-course-chart");if(ctx){let type="line";var bgColor=main.getRandomColors(["c6"],"0.5",!0),borderColor=main.getRandomColors(["c6"]),customConfig={options:{maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,min:0,suggestedMin:0,ticks:{stepSize:1}}}},data:{datasets:[{label:mostvisitcourse.visits}]}};chartReport=main.buildChart(ctx,type,mostvisitcourse.label,mostvisitcourse.value,bgColor,customConfig,borderColor)}},getUserMostvisitsrecords=function(filter){var request={methodname:"report_lmsace_reports_get_chart_reports",args:{filter:filter,chartid:"mostvisitcoursewidget",relatedid:mostvisitcourse.userid}},promise=AJAX.call([request])[0];promise.done((function(result){updateChartData(result)})),LoadIcon.addIconToContainerRemoveOnCompletion(loadiconElement,promise)},updateChartData=function(result){chartReport.data.labels=result.label,chartReport.data.datasets[0].data=result.value,chartReport.update()};return{init:function(main){showMostVisitsCourses(main),$(".user-visits-course-block .dropdown-menu a").click((function(){var selText=$(this).text(),filter=$(this).attr("value");$(this).parents(".dropdown").find("#daterangefiltermenu").html(selText+' <span class="caret"></span>'),getUserMostvisitsrecords(filter)}))}}}));

//# sourceMappingURL=user_mostvisitcourses.min.js.map