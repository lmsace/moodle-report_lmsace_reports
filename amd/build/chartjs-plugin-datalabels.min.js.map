{"version":3,"file":"chartjs-plugin-datalabels.min.js","sources":["../src/chartjs-plugin-datalabels.js"],"sourcesContent":["/**\n * chartjs-plugin-datalabels v2.2.0\n * https://chartjs-plugin-datalabels.netlify.app\n * (c) 2017-2022 chartjs-plugin-datalabels contributors\n * Released under the MIT license\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('chart.js/helpers'), require('chart.js')) :\n    typeof define === 'function' && define.amd ? define(['core/chartjs-lazy'], factory) :\n      (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.ChartDataLabels = factory(global.Chart));\n})(this, (function (chart_js) {\n  'use strict';\n\n  var helpers = Chart.helpers;\n  var devicePixelRatio = (function () {\n    if (typeof window !== 'undefined') {\n      if (window.devicePixelRatio) {\n        return window.devicePixelRatio;\n      }\n\n      // devicePixelRatio is undefined on IE10\n      // https://stackoverflow.com/a/20204180/8837887\n      // https://github.com/chartjs/chartjs-plugin-datalabels/issues/85\n      var screen = window.screen;\n      if (screen) {\n        return (screen.deviceXDPI || 1) / (screen.logicalXDPI || 1);\n      }\n    }\n\n    return 1;\n  }());\n\n  var utils = {\n    // @todo move this in Chart.helpers.toTextLines\n    toTextLines: function (inputs) {\n      var lines = [];\n      var input;\n\n      inputs = [].concat(inputs);\n      while (inputs.length) {\n        input = inputs.pop();\n        if (typeof input === 'string') {\n          lines.unshift.apply(lines, input.split('\\n'));\n        } else if (Array.isArray(input)) {\n          inputs.push.apply(inputs, input);\n        } else if (!helpers.isNullOrUndef(inputs)) {\n          lines.unshift('' + input);\n        }\n      }\n\n      return lines;\n    },\n\n    // @todo move this in Chart.helpers.canvas.textSize\n    // @todo cache calls of measureText if font doesn't change?!\n    textSize: function (ctx, lines, font) {\n      var items = [].concat(lines);\n      var ilen = items.length;\n      var prev = ctx.font;\n      var width = 0;\n      var i;\n\n      ctx.font = font.string;\n\n      for (i = 0; i < ilen; ++i) {\n        width = Math.max(ctx.measureText(items[i]).width, width);\n      }\n\n      ctx.font = prev;\n\n      return {\n        height: ilen * font.lineHeight,\n        width: width\n      };\n    },\n\n    /**\n     * Returns value bounded by min and max. This is equivalent to max(min, min(value, max)).\n     * @todo move this method in Chart.helpers.bound\n     * https://doc.qt.io/qt-5/qtglobal.html#qBound\n     */\n    bound: function (min, value, max) {\n      return Math.max(min, Math.min(value, max));\n    },\n\n    /**\n     * Returns an array of pair [value, state] where state is:\n     * * -1: value is only in a0 (removed)\n     * *  1: value is only in a1 (added)\n     */\n    arrayDiff: function (a0, a1) {\n      var prev = a0.slice();\n      var updates = [];\n      var i, j, ilen, v;\n\n      for (i = 0, ilen = a1.length; i < ilen; ++i) {\n        v = a1[i];\n        j = prev.indexOf(v);\n\n        if (j === -1) {\n          updates.push([v, 1]);\n        } else {\n          prev.splice(j, 1);\n        }\n      }\n\n      for (i = 0, ilen = prev.length; i < ilen; ++i) {\n        updates.push([prev[i], -1]);\n      }\n\n      return updates;\n    },\n\n    /**\n     * https://github.com/chartjs/chartjs-plugin-datalabels/issues/70\n     */\n    rasterize: function (v) {\n      return Math.round(v * devicePixelRatio) / devicePixelRatio;\n    }\n  };\n\n  function orient(point, origin) {\n    var x0 = origin.x;\n    var y0 = origin.y;\n\n    if (x0 === null) {\n      return { x: 0, y: -1 };\n    }\n    if (y0 === null) {\n      return { x: 1, y: 0 };\n    }\n\n    var dx = point.x - x0;\n    var dy = point.y - y0;\n    var ln = Math.sqrt(dx * dx + dy * dy);\n\n    return {\n      x: ln ? dx / ln : 0,\n      y: ln ? dy / ln : -1\n    };\n  }\n\n  function aligned(x, y, vx, vy, align) {\n    switch (align) {\n      case 'center':\n        vx = vy = 0;\n        break;\n      case 'bottom':\n        vx = 0;\n        vy = 1;\n        break;\n      case 'right':\n        vx = 1;\n        vy = 0;\n        break;\n      case 'left':\n        vx = -1;\n        vy = 0;\n        break;\n      case 'top':\n        vx = 0;\n        vy = -1;\n        break;\n      case 'start':\n        vx = -vx;\n        vy = -vy;\n        break;\n      case 'end':\n        // keep natural orientation\n        break;\n      default:\n        // clockwise rotation (in degree)\n        align *= (Math.PI / 180);\n        vx = Math.cos(align);\n        vy = Math.sin(align);\n        break;\n    }\n\n    return {\n      x: x,\n      y: y,\n      vx: vx,\n      vy: vy\n    };\n  }\n\n  // Line clipping (Cohen–Sutherland algorithm)\n  // https://en.wikipedia.org/wiki/Cohen–Sutherland_algorithm\n\n  var R_INSIDE = 0;\n  var R_LEFT = 1;\n  var R_RIGHT = 2;\n  var R_BOTTOM = 4;\n  var R_TOP = 8;\n\n  function region(x, y, rect) {\n    var res = R_INSIDE;\n\n    if (x < rect.left) {\n      res |= R_LEFT;\n    } else if (x > rect.right) {\n      res |= R_RIGHT;\n    }\n    if (y < rect.top) {\n      res |= R_TOP;\n    } else if (y > rect.bottom) {\n      res |= R_BOTTOM;\n    }\n\n    return res;\n  }\n\n  function clipped(segment, area) {\n    var x0 = segment.x0;\n    var y0 = segment.y0;\n    var x1 = segment.x1;\n    var y1 = segment.y1;\n    var r0 = region(x0, y0, area);\n    var r1 = region(x1, y1, area);\n    var r, x, y;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (!(r0 | r1) || (r0 & r1)) {\n        // both points inside or on the same side: no clipping\n        break;\n      }\n\n      // at least one point is outside\n      r = r0 || r1;\n\n      if (r & R_TOP) {\n        x = x0 + (x1 - x0) * (area.top - y0) / (y1 - y0);\n        y = area.top;\n      } else if (r & R_BOTTOM) {\n        x = x0 + (x1 - x0) * (area.bottom - y0) / (y1 - y0);\n        y = area.bottom;\n      } else if (r & R_RIGHT) {\n        y = y0 + (y1 - y0) * (area.right - x0) / (x1 - x0);\n        x = area.right;\n      } else if (r & R_LEFT) {\n        y = y0 + (y1 - y0) * (area.left - x0) / (x1 - x0);\n        x = area.left;\n      }\n\n      if (r === r0) {\n        x0 = x;\n        y0 = y;\n        r0 = region(x0, y0, area);\n      } else {\n        x1 = x;\n        y1 = y;\n        r1 = region(x1, y1, area);\n      }\n    }\n\n    return {\n      x0: x0,\n      x1: x1,\n      y0: y0,\n      y1: y1\n    };\n  }\n\n  function compute$1(range, config) {\n    var anchor = config.anchor;\n    var segment = range;\n    var x, y;\n\n    if (config.clamp) {\n      segment = clipped(segment, config.area);\n    }\n\n    if (anchor === 'start') {\n      x = segment.x0;\n      y = segment.y0;\n    } else if (anchor === 'end') {\n      x = segment.x1;\n      y = segment.y1;\n    } else {\n      x = (segment.x0 + segment.x1) / 2;\n      y = (segment.y0 + segment.y1) / 2;\n    }\n\n    return aligned(x, y, range.vx, range.vy, config.align);\n  }\n\n  var positioners = {\n    arc: function (el, config) {\n      var angle = (el.startAngle + el.endAngle) / 2;\n      var vx = Math.cos(angle);\n      var vy = Math.sin(angle);\n      var r0 = el.innerRadius;\n      var r1 = el.outerRadius;\n\n      return compute$1({\n        x0: el.x + vx * r0,\n        y0: el.y + vy * r0,\n        x1: el.x + vx * r1,\n        y1: el.y + vy * r1,\n        vx: vx,\n        vy: vy\n      }, config);\n    },\n\n    point: function (el, config) {\n      var v = orient(el, config.origin);\n      var rx = v.x * el.options.radius;\n      var ry = v.y * el.options.radius;\n\n      return compute$1({\n        x0: el.x - rx,\n        y0: el.y - ry,\n        x1: el.x + rx,\n        y1: el.y + ry,\n        vx: v.x,\n        vy: v.y\n      }, config);\n    },\n\n    bar: function (el, config) {\n      var v = orient(el, config.origin);\n      var x = el.x;\n      var y = el.y;\n      var sx = 0;\n      var sy = 0;\n\n      if (el.horizontal) {\n        x = Math.min(el.x, el.base);\n        sx = Math.abs(el.base - el.x);\n      } else {\n        y = Math.min(el.y, el.base);\n        sy = Math.abs(el.base - el.y);\n      }\n\n      return compute$1({\n        x0: x,\n        y0: y + sy,\n        x1: x + sx,\n        y1: y,\n        vx: v.x,\n        vy: v.y\n      }, config);\n    },\n\n    fallback: function (el, config) {\n      var v = orient(el, config.origin);\n\n      return compute$1({\n        x0: el.x,\n        y0: el.y,\n        x1: el.x + (el.width || 0),\n        y1: el.y + (el.height || 0),\n        vx: v.x,\n        vy: v.y\n      }, config);\n    }\n  };\n\n  var rasterize = utils.rasterize;\n\n  function boundingRects(model) {\n    var borderWidth = model.borderWidth || 0;\n    var padding = model.padding;\n    var th = model.size.height;\n    var tw = model.size.width;\n    var tx = -tw / 2;\n    var ty = -th / 2;\n\n    return {\n      frame: {\n        x: tx - padding.left - borderWidth,\n        y: ty - padding.top - borderWidth,\n        w: tw + padding.width + borderWidth * 2,\n        h: th + padding.height + borderWidth * 2\n      },\n      text: {\n        x: tx,\n        y: ty,\n        w: tw,\n        h: th\n      }\n    };\n  }\n\n  function getScaleOrigin(el, context) {\n    var scale = context.chart.getDatasetMeta(context.datasetIndex).vScale;\n\n    if (!scale) {\n      return null;\n    }\n\n    if (scale.xCenter !== undefined && scale.yCenter !== undefined) {\n      return { x: scale.xCenter, y: scale.yCenter };\n    }\n\n    var pixel = scale.getBasePixel();\n    return el.horizontal ?\n      { x: pixel, y: null } :\n      { x: null, y: pixel };\n  }\n\n  function getPositioner(el) {\n    // console.log(el);\n    if (el.constructor.name === 'ArcElement') {\n      return positioners.arc;\n    }\n    if (el.constructor.name === 'PointElement') {\n      return positioners.point;\n    }\n    if (el.constructor.name === 'BarElement') {\n      return positioners.bar;\n    }\n    return positioners.fallback;\n  }\n\n  function drawRoundedRect(ctx, x, y, w, h, radius) {\n    var HALF_PI = Math.PI / 2;\n\n    if (radius) {\n      var r = Math.min(radius, h / 2, w / 2);\n      var left = x + r;\n      var top = y + r;\n      var right = x + w - r;\n      var bottom = y + h - r;\n\n      ctx.moveTo(x, top);\n      if (left < right && top < bottom) {\n        ctx.arc(left, top, r, -Math.PI, -HALF_PI);\n        ctx.arc(right, top, r, -HALF_PI, 0);\n        ctx.arc(right, bottom, r, 0, HALF_PI);\n        ctx.arc(left, bottom, r, HALF_PI, Math.PI);\n      } else if (left < right) {\n        ctx.moveTo(left, y);\n        ctx.arc(right, top, r, -HALF_PI, HALF_PI);\n        ctx.arc(left, top, r, HALF_PI, Math.PI + HALF_PI);\n      } else if (top < bottom) {\n        ctx.arc(left, top, r, -Math.PI, 0);\n        ctx.arc(left, bottom, r, 0, Math.PI);\n      } else {\n        ctx.arc(left, top, r, -Math.PI, Math.PI);\n      }\n      ctx.closePath();\n      ctx.moveTo(x, y);\n    } else {\n      ctx.rect(x, y, w, h);\n    }\n  }\n\n  function drawFrame(ctx, rect, model) {\n    var bgColor = model.backgroundColor;\n    var borderColor = model.borderColor;\n    var borderWidth = model.borderWidth;\n\n    if (!bgColor && (!borderColor || !borderWidth)) {\n      return;\n    }\n\n    ctx.beginPath();\n\n    drawRoundedRect(\n      ctx,\n      rasterize(rect.x) + borderWidth / 2,\n      rasterize(rect.y) + borderWidth / 2,\n      rasterize(rect.w) - borderWidth,\n      rasterize(rect.h) - borderWidth,\n      model.borderRadius);\n\n    ctx.closePath();\n\n    if (bgColor) {\n      ctx.fillStyle = bgColor;\n      ctx.fill();\n    }\n\n    if (borderColor && borderWidth) {\n      ctx.strokeStyle = borderColor;\n      ctx.lineWidth = borderWidth;\n      ctx.lineJoin = 'miter';\n      ctx.stroke();\n    }\n  }\n\n  function textGeometry(rect, align, font) {\n    var h = font.lineHeight;\n    var w = rect.w;\n    var x = rect.x;\n    var y = rect.y + h / 2;\n\n    if (align === 'center') {\n      x += w / 2;\n    } else if (align === 'end' || align === 'right') {\n      x += w;\n    }\n\n    return {\n      h: h,\n      w: w,\n      x: x,\n      y: y\n    };\n  }\n\n  function drawTextLine(ctx, text, cfg) {\n    var shadow = ctx.shadowBlur;\n    var stroked = cfg.stroked;\n    var x = rasterize(cfg.x);\n    var y = rasterize(cfg.y);\n    var w = rasterize(cfg.w);\n\n    if (stroked) {\n      ctx.strokeText(text, x, y, w);\n    }\n\n    if (cfg.filled) {\n      if (shadow && stroked) {\n        // Prevent drawing shadow on both the text stroke and fill, so\n        // if the text is stroked, remove the shadow for the text fill.\n        ctx.shadowBlur = 0;\n      }\n\n      ctx.fillText(text, x, y, w);\n\n      if (shadow && stroked) {\n        ctx.shadowBlur = shadow;\n      }\n    }\n  }\n\n  function drawText(ctx, lines, rect, model) {\n    var align = model.textAlign;\n    var color = model.color;\n    var filled = !!color;\n    var font = model.font;\n    var ilen = lines.length;\n    var strokeColor = model.textStrokeColor;\n    var strokeWidth = model.textStrokeWidth;\n    var stroked = strokeColor && strokeWidth;\n    var i;\n\n    if (!ilen || (!filled && !stroked)) {\n      return;\n    }\n\n    // Adjust coordinates based on text alignment and line height\n    rect = textGeometry(rect, align, font);\n\n    ctx.font = font.string;\n    ctx.textAlign = align;\n    ctx.textBaseline = 'middle';\n    ctx.shadowBlur = model.textShadowBlur;\n    ctx.shadowColor = model.textShadowColor;\n\n    if (filled) {\n      ctx.fillStyle = color;\n    }\n    if (stroked) {\n      ctx.lineJoin = 'round';\n      ctx.lineWidth = strokeWidth;\n      ctx.strokeStyle = strokeColor;\n    }\n\n    for (i = 0, ilen = lines.length; i < ilen; ++i) {\n      drawTextLine(ctx, lines[i], {\n        stroked: stroked,\n        filled: filled,\n        w: rect.w,\n        x: rect.x,\n        y: rect.y + rect.h * i\n      });\n    }\n  }\n\n  var Label = function (config, ctx, el, index) {\n    var me = this;\n\n    me._config = config;\n    me._index = index;\n    me._model = null;\n    me._rects = null;\n    me._ctx = ctx;\n    me._el = el;\n  };\n\n  helpers.merge(Label.prototype, {\n    /**\n     * @private\n     */\n    _modelize: function (display, lines, config, context) {\n      var me = this;\n      var index = me._index;\n      var font = helpers.toFont(helpers.resolve([config.font, {}], context, index));\n      var color = helpers.resolve([config.color, chart_js.defaults.color], context, index);\n\n      return {\n        align: helpers.resolve([config.align, 'center'], context, index),\n        anchor: helpers.resolve([config.anchor, 'center'], context, index),\n        area: context.chart.chartArea,\n        backgroundColor: helpers.resolve([config.backgroundColor, null], context, index),\n        borderColor: helpers.resolve([config.borderColor, null], context, index),\n        borderRadius: helpers.resolve([config.borderRadius, 0], context, index),\n        borderWidth: helpers.resolve([config.borderWidth, 0], context, index),\n        clamp: helpers.resolve([config.clamp, false], context, index),\n        clip: helpers.resolve([config.clip, false], context, index),\n        color: color,\n        display: display,\n        font: font,\n        lines: lines,\n        offset: helpers.resolve([config.offset, 4], context, index),\n        opacity: helpers.resolve([config.opacity, 1], context, index),\n        origin: getScaleOrigin(me._el, context),\n        padding: helpers.toPadding(helpers.resolve([config.padding, 4], context, index)),\n        positioner: getPositioner(me._el),\n        rotation: helpers.resolve([config.rotation, 0], context, index) * (Math.PI / 180),\n        size: utils.textSize(me._ctx, lines, font),\n        textAlign: helpers.resolve([config.textAlign, 'start'], context, index),\n        textShadowBlur: helpers.resolve([config.textShadowBlur, 0], context, index),\n        textShadowColor: helpers.resolve([config.textShadowColor, color], context, index),\n        textStrokeColor: helpers.resolve([config.textStrokeColor, color], context, index),\n        textStrokeWidth: helpers.resolve([config.textStrokeWidth, 0], context, index)\n      };\n    },\n\n    update: function (context) {\n      var me = this;\n      var model = null;\n      var rects = null;\n      var index = me._index;\n      var config = me._config;\n      var value, label, lines;\n\n      // We first resolve the display option (separately) to avoid computing\n      // other options in case the label is hidden (i.e. display: false).\n      var display = helpers.resolve([config.display, true], context, index);\n\n      if (display) {\n        value = context.dataset.data[index];\n        label = helpers.valueOrDefault(helpers.callback(config.formatter, [value, context]), value);\n        lines = helpers.isNullOrUndef(label) ? [] : utils.toTextLines(label);\n\n        if (lines.length) {\n          model = me._modelize(display, lines, config, context);\n          rects = boundingRects(model);\n        }\n      }\n\n      me._model = model;\n      me._rects = rects;\n    },\n\n    geometry: function () {\n      return this._rects ? this._rects.frame : {};\n    },\n\n    rotation: function () {\n      return this._model ? this._model.rotation : 0;\n    },\n\n    visible: function () {\n      return this._model && this._model.opacity;\n    },\n\n    model: function () {\n      return this._model;\n    },\n\n    draw: function (chart, center) {\n      var me = this;\n      var ctx = chart.ctx;\n      var model = me._model;\n      var rects = me._rects;\n      var area;\n\n      if (!this.visible()) {\n        return;\n      }\n\n      ctx.save();\n\n      if (model.clip) {\n        area = model.area;\n        ctx.beginPath();\n        ctx.rect(\n          area.left,\n          area.top,\n          area.right - area.left,\n          area.bottom - area.top);\n        ctx.clip();\n      }\n\n      ctx.globalAlpha = utils.bound(0, model.opacity, 1);\n      ctx.translate(rasterize(center.x), rasterize(center.y));\n      ctx.rotate(model.rotation);\n\n      drawFrame(ctx, rects.frame, model);\n      drawText(ctx, model.lines, rects.text, model);\n\n      ctx.restore();\n    }\n  });\n\n  var MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991; // eslint-disable-line es/no-number-minsafeinteger\n  var MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;  // eslint-disable-line es/no-number-maxsafeinteger\n\n  function rotated(point, center, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var cx = center.x;\n    var cy = center.y;\n\n    return {\n      x: cx + cos * (point.x - cx) - sin * (point.y - cy),\n      y: cy + sin * (point.x - cx) + cos * (point.y - cy)\n    };\n  }\n\n  function projected(points, axis) {\n    var min = MAX_INTEGER;\n    var max = MIN_INTEGER;\n    var origin = axis.origin;\n    var i, pt, vx, vy, dp;\n\n    for (i = 0; i < points.length; ++i) {\n      pt = points[i];\n      vx = pt.x - origin.x;\n      vy = pt.y - origin.y;\n      dp = axis.vx * vx + axis.vy * vy;\n      min = Math.min(min, dp);\n      max = Math.max(max, dp);\n    }\n\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  function toAxis(p0, p1) {\n    var vx = p1.x - p0.x;\n    var vy = p1.y - p0.y;\n    var ln = Math.sqrt(vx * vx + vy * vy);\n\n    return {\n      vx: (p1.x - p0.x) / ln,\n      vy: (p1.y - p0.y) / ln,\n      origin: p0,\n      ln: ln\n    };\n  }\n\n  var HitBox = function () {\n    this._rotation = 0;\n    this._rect = {\n      x: 0,\n      y: 0,\n      w: 0,\n      h: 0\n    };\n  };\n\n  helpers.merge(HitBox.prototype, {\n    center: function () {\n      var r = this._rect;\n      return {\n        x: r.x + r.w / 2,\n        y: r.y + r.h / 2\n      };\n    },\n\n    update: function (center, rect, rotation) {\n      this._rotation = rotation;\n      this._rect = {\n        x: rect.x + center.x,\n        y: rect.y + center.y,\n        w: rect.w,\n        h: rect.h\n      };\n    },\n\n    contains: function (point) {\n      var me = this;\n      var margin = 1;\n      var rect = me._rect;\n\n      point = rotated(point, me.center(), -me._rotation);\n\n      return !(point.x < rect.x - margin\n        || point.y < rect.y - margin\n        || point.x > rect.x + rect.w + margin * 2\n        || point.y > rect.y + rect.h + margin * 2);\n    },\n\n    // Separating Axis Theorem\n    // https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\n    intersects: function (other) {\n      var r0 = this._points();\n      var r1 = other._points();\n      var axes = [\n        toAxis(r0[0], r0[1]),\n        toAxis(r0[0], r0[3])\n      ];\n      var i, pr0, pr1;\n\n      if (this._rotation !== other._rotation) {\n        // Only separate with r1 axis if the rotation is different,\n        // else it's enough to separate r0 and r1 with r0 axis only!\n        axes.push(\n          toAxis(r1[0], r1[1]),\n          toAxis(r1[0], r1[3])\n        );\n      }\n\n      for (i = 0; i < axes.length; ++i) {\n        pr0 = projected(r0, axes[i]);\n        pr1 = projected(r1, axes[i]);\n\n        if (pr0.max < pr1.min || pr1.max < pr0.min) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n\n    /**\n     * @private\n     */\n    _points: function () {\n      var me = this;\n      var rect = me._rect;\n      var angle = me._rotation;\n      var center = me.center();\n\n      return [\n        rotated({ x: rect.x, y: rect.y }, center, angle),\n        rotated({ x: rect.x + rect.w, y: rect.y }, center, angle),\n        rotated({ x: rect.x + rect.w, y: rect.y + rect.h }, center, angle),\n        rotated({ x: rect.x, y: rect.y + rect.h }, center, angle)\n      ];\n    }\n  });\n\n  function coordinates(el, model, geometry) {\n    var point = model.positioner(el, model);\n    var vx = point.vx;\n    var vy = point.vy;\n\n    if (!vx && !vy) {\n      // if aligned center, we don't want to offset the center point\n      return { x: point.x, y: point.y };\n    }\n\n    var w = geometry.w;\n    var h = geometry.h;\n\n    // take in account the label rotation\n    var rotation = model.rotation;\n    var dx = Math.abs(w / 2 * Math.cos(rotation)) + Math.abs(h / 2 * Math.sin(rotation));\n    var dy = Math.abs(w / 2 * Math.sin(rotation)) + Math.abs(h / 2 * Math.cos(rotation));\n\n    // scale the unit vector (vx, vy) to get at least dx or dy equal to\n    // w or h respectively (else we would calculate the distance to the\n    // ellipse inscribed in the bounding rect)\n    var vs = 1 / Math.max(Math.abs(vx), Math.abs(vy));\n    dx *= vx * vs;\n    dy *= vy * vs;\n\n    // finally, include the explicit offset\n    dx += model.offset * vx;\n    dy += model.offset * vy;\n\n    return {\n      x: point.x + dx,\n      y: point.y + dy\n    };\n  }\n\n  function collide(labels, collider) {\n    var i, j, s0, s1;\n\n    // IMPORTANT Iterate in the reverse order since items at the end of the\n    // list have an higher weight/priority and thus should be less impacted\n    // by the overlapping strategy.\n\n    for (i = labels.length - 1; i >= 0; --i) {\n      s0 = labels[i].$layout;\n\n      for (j = i - 1; j >= 0 && s0._visible; --j) {\n        s1 = labels[j].$layout;\n\n        if (s1._visible && s0._box.intersects(s1._box)) {\n          collider(s0, s1);\n        }\n      }\n    }\n\n    return labels;\n  }\n\n  function compute(labels) {\n    var i, ilen, label, state, geometry, center, proxy;\n\n    // Initialize labels for overlap detection\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      label = labels[i];\n      state = label.$layout;\n\n      if (state._visible) {\n        // Chart.js 3 removed el._model in favor of getProps(), making harder to\n        // abstract reading values in positioners. Also, using string arrays to\n        // read values (i.e. var {a,b,c} = el.getProps([\"a\",\"b\",\"c\"])) would make\n        // positioners inefficient in the normal case (i.e. not the final values)\n        // and the code a bit ugly, so let's use a Proxy instead.\n        proxy = new Proxy(label._el, { get: (el, p) => el.getProps([p], true)[p] });\n\n        geometry = label.geometry();\n        center = coordinates(proxy, label.model(), geometry);\n        state._box.update(center, geometry, label.rotation());\n      }\n    }\n\n    // Auto hide overlapping labels\n    return collide(labels, function (s0, s1) {\n      var h0 = s0._hidable;\n      var h1 = s1._hidable;\n\n      if ((h0 && h1) || h1) {\n        s1._visible = false;\n      } else if (h0) {\n        s0._visible = false;\n      }\n    });\n  }\n\n  var layout = {\n    prepare: function (datasets) {\n      var labels = [];\n      var i, j, ilen, jlen, label;\n\n      for (i = 0, ilen = datasets.length; i < ilen; ++i) {\n        for (j = 0, jlen = datasets[i].length; j < jlen; ++j) {\n          label = datasets[i][j];\n          labels.push(label);\n          label.$layout = {\n            _box: new HitBox(),\n            _hidable: false,\n            _visible: true,\n            _set: i,\n            _idx: label._index\n          };\n        }\n      }\n\n      // TODO New `z` option: labels with a higher z-index are drawn\n      // of top of the ones with a lower index. Lowest z-index labels\n      // are also discarded first when hiding overlapping labels.\n      labels.sort(function (a, b) {\n        var sa = a.$layout;\n        var sb = b.$layout;\n\n        return sa._idx === sb._idx\n          ? sb._set - sa._set\n          : sb._idx - sa._idx;\n      });\n\n      this.update(labels);\n\n      return labels;\n    },\n\n    update: function (labels) {\n      var dirty = false;\n      var i, ilen, label, model, state;\n\n      for (i = 0, ilen = labels.length; i < ilen; ++i) {\n        label = labels[i];\n        model = label.model();\n        state = label.$layout;\n        state._hidable = model && model.display === 'auto';\n        state._visible = label.visible();\n        dirty |= state._hidable;\n      }\n\n      if (dirty) {\n        compute(labels);\n      }\n    },\n\n    lookup: function (labels, point) {\n      var i, state;\n\n      // IMPORTANT Iterate in the reverse order since items at the end of\n      // the list have an higher z-index, thus should be picked first.\n\n      for (i = labels.length - 1; i >= 0; --i) {\n        state = labels[i].$layout;\n\n        if (state && state._visible && state._box.contains(point)) {\n          return labels[i];\n        }\n      }\n\n      return null;\n    },\n\n    draw: function (chart, labels) {\n      var i, ilen, label, state, geometry, center;\n\n      for (i = 0, ilen = labels.length; i < ilen; ++i) {\n        label = labels[i];\n        state = label.$layout;\n\n        if (state._visible) {\n          geometry = label.geometry();\n          center = coordinates(label._el, label.model(), geometry);\n          state._box.update(center, geometry, label.rotation());\n          label.draw(chart, center);\n        }\n      }\n    }\n  };\n\n  var formatter = function (value) {\n    if (helpers.isNullOrUndef(value)) {\n      return null;\n    }\n\n    var label = value;\n    var keys, klen, k;\n    if (helpers.isObject(value)) {\n      if (!helpers.isNullOrUndef(value.label)) {\n        label = value.label;\n      } else if (!helpers.isNullOrUndef(value.r)) {\n        label = value.r;\n      } else {\n        label = '';\n        keys = Object.keys(value);\n        for (k = 0, klen = keys.length; k < klen; ++k) {\n          label += (k !== 0 ? ', ' : '') + keys[k] + ': ' + value[keys[k]];\n        }\n      }\n    }\n\n    return '' + label;\n  };\n\n  /**\n   * IMPORTANT: make sure to also update tests and TypeScript definition\n   * files (`/test/specs/defaults.spec.js` and `/types/options.d.ts`)\n   */\n\n  var defaults = {\n    align: 'center',\n    anchor: 'center',\n    backgroundColor: null,\n    borderColor: null,\n    borderRadius: 0,\n    borderWidth: 0,\n    clamp: false,\n    clip: false,\n    color: undefined,\n    display: true,\n    font: {\n      family: undefined,\n      lineHeight: 1.2,\n      size: undefined,\n      style: undefined,\n      weight: null\n    },\n    formatter: formatter,\n    labels: undefined,\n    listeners: {},\n    offset: 4,\n    opacity: 1,\n    padding: {\n      top: 4,\n      right: 4,\n      bottom: 4,\n      left: 4\n    },\n    rotation: 0,\n    textAlign: 'start',\n    textStrokeColor: undefined,\n    textStrokeWidth: 0,\n    textShadowBlur: 0,\n    textShadowColor: undefined\n  };\n\n  /**\n   * @see https://github.com/chartjs/Chart.js/issues/4176\n   */\n\n  var EXPANDO_KEY = '$datalabels';\n  var DEFAULT_KEY = '$default';\n\n  function configure(dataset, options) {\n    var override = dataset.datalabels;\n    var listeners = {};\n    var configs = [];\n    var labels, keys;\n\n    if (override === false) {\n      return null;\n    }\n    if (override === true) {\n      override = {};\n    }\n\n    options = helpers.merge({}, [options, override]);\n    labels = options.labels || {};\n    keys = Object.keys(labels);\n    delete options.labels;\n\n    if (keys.length) {\n      keys.forEach(function (key) {\n        if (labels[key]) {\n          configs.push(helpers.merge({}, [\n            options,\n            labels[key],\n            { _key: key }\n          ]));\n        }\n      });\n    } else {\n      // Default label if no \"named\" label defined.\n      configs.push(options);\n    }\n\n    // listeners: {<event-type>: {<label-key>: <fn>}}\n    listeners = configs.reduce(function (target, config) {\n      helpers.each(config.listeners || {}, function (fn, event) {\n        target[event] = target[event] || {};\n        target[event][config._key || DEFAULT_KEY] = fn;\n      });\n\n      delete config.listeners;\n      return target;\n    }, {});\n\n    return {\n      labels: configs,\n      listeners: listeners\n    };\n  }\n\n  function dispatchEvent(chart, listeners, label, event) {\n    if (!listeners) {\n      return;\n    }\n\n    var context = label.$context;\n    var groups = label.$groups;\n    var callback;\n\n    if (!listeners[groups._set]) {\n      return;\n    }\n\n    callback = listeners[groups._set][groups._key];\n    if (!callback) {\n      return;\n    }\n\n    if (helpers.callback(callback, [context, event]) === true) {\n      // Users are allowed to tweak the given context by injecting values that can be\n      // used in scriptable options to display labels differently based on the current\n      // event (e.g. highlight an hovered label). That's why we update the label with\n      // the output context and schedule a new chart render by setting it dirty.\n      chart[EXPANDO_KEY]._dirty = true;\n      label.update(context);\n    }\n  }\n\n  function dispatchMoveEvents(chart, listeners, previous, label, event) {\n    var enter, leave;\n\n    if (!previous && !label) {\n      return;\n    }\n\n    if (!previous) {\n      enter = true;\n    } else if (!label) {\n      leave = true;\n    } else if (previous !== label) {\n      leave = enter = true;\n    }\n\n    if (leave) {\n      dispatchEvent(chart, listeners.leave, previous, event);\n    }\n    if (enter) {\n      dispatchEvent(chart, listeners.enter, label, event);\n    }\n  }\n\n  function handleMoveEvents(chart, event) {\n    var expando = chart[EXPANDO_KEY];\n    var listeners = expando._listeners;\n    var previous, label;\n\n    if (!listeners.enter && !listeners.leave) {\n      return;\n    }\n\n    if (event.type === 'mousemove') {\n      label = layout.lookup(expando._labels, event);\n    } else if (event.type !== 'mouseout') {\n      return;\n    }\n\n    previous = expando._hovered;\n    expando._hovered = label;\n    dispatchMoveEvents(chart, listeners, previous, label, event);\n  }\n\n  function handleClickEvents(chart, event) {\n    var expando = chart[EXPANDO_KEY];\n    var handlers = expando._listeners.click;\n    var label = handlers && layout.lookup(expando._labels, event);\n    if (label) {\n      dispatchEvent(chart, handlers, label, event);\n    }\n  }\n\n  var plugin = {\n    id: 'datalabels',\n\n    defaults: defaults,\n\n    beforeInit: function (chart) {\n      chart[EXPANDO_KEY] = {\n        _actives: []\n      };\n    },\n\n    beforeUpdate: function (chart) {\n      var expando = chart[EXPANDO_KEY];\n      expando._listened = false;\n      expando._listeners = {};     // {<event-type>: {<dataset-index>: {<label-key>: <fn>}}}\n      expando._datasets = [];      // per dataset labels: [Label[]]\n      expando._labels = [];        // layouted labels: Label[]\n    },\n\n    afterDatasetUpdate: function (chart, args, options) {\n      var datasetIndex = args.index;\n      var expando = chart[EXPANDO_KEY];\n      var labels = expando._datasets[datasetIndex] = [];\n      var visible = chart.isDatasetVisible(datasetIndex);\n      var dataset = chart.data.datasets[datasetIndex];\n      var config = configure(dataset, options);\n      var elements = args.meta.data || [];\n      var ctx = chart.ctx;\n      var i, j, ilen, jlen, cfg, key, el, label;\n\n      ctx.save();\n\n      for (i = 0, ilen = elements.length; i < ilen; ++i) {\n        el = elements[i];\n        el[EXPANDO_KEY] = [];\n\n        if (visible && el && chart.getDataVisibility(i) && !el.skip) {\n          for (j = 0, jlen = config.labels.length; j < jlen; ++j) {\n            cfg = config.labels[j];\n            key = cfg._key;\n\n            label = new Label(cfg, ctx, el, i);\n            label.$groups = {\n              _set: datasetIndex,\n              _key: key || DEFAULT_KEY\n            };\n            label.$context = {\n              active: false,\n              chart: chart,\n              dataIndex: i,\n              dataset: dataset,\n              datasetIndex: datasetIndex\n            };\n\n            label.update(label.$context);\n            el[EXPANDO_KEY].push(label);\n            labels.push(label);\n          }\n        }\n      }\n\n      ctx.restore();\n\n      // Store listeners at the chart level and per event type to optimize\n      // cases where no listeners are registered for a specific event.\n      helpers.merge(expando._listeners, config.listeners, {\n        merger: function (event, target, source) {\n          target[event] = target[event] || {};\n          target[event][args.index] = source[event];\n          expando._listened = true;\n        }\n      });\n    },\n\n    afterUpdate: function (chart) {\n      chart[EXPANDO_KEY]._labels = layout.prepare(chart[EXPANDO_KEY]._datasets);\n    },\n\n    // Draw labels on top of all dataset elements\n    // https://github.com/chartjs/chartjs-plugin-datalabels/issues/29\n    // https://github.com/chartjs/chartjs-plugin-datalabels/issues/32\n    afterDatasetsDraw: function (chart) {\n      layout.draw(chart, chart[EXPANDO_KEY]._labels);\n    },\n\n    beforeEvent: function (chart, args) {\n      // If there is no listener registered for this chart, `listened` will be false,\n      // meaning we can immediately ignore the incoming event and avoid useless extra\n      // computation for users who don't implement label interactions.\n      if (chart[EXPANDO_KEY]._listened) {\n        var event = args.event;\n        switch (event.type) {\n          case 'mousemove':\n          case 'mouseout':\n            handleMoveEvents(chart, event);\n            break;\n          case 'click':\n            handleClickEvents(chart, event);\n            break;\n        }\n      }\n    },\n\n    afterEvent: function (chart) {\n      var expando = chart[EXPANDO_KEY];\n      var previous = expando._actives;\n      var actives = expando._actives = chart.getActiveElements();\n      var updates = utils.arrayDiff(previous, actives);\n      var i, ilen, j, jlen, update, label, labels;\n\n      for (i = 0, ilen = updates.length; i < ilen; ++i) {\n        update = updates[i];\n        if (update[1]) {\n          labels = update[0].element[EXPANDO_KEY] || [];\n          for (j = 0, jlen = labels.length; j < jlen; ++j) {\n            label = labels[j];\n            label.$context.active = (update[1] === 1);\n            label.update(label.$context);\n          }\n        }\n      }\n\n      if (expando._dirty || updates.length) {\n        layout.update(expando._labels);\n        chart.render();\n      }\n\n      delete expando._dirty;\n    }\n  };\n\n  return plugin;\n\n}));\n"],"names":["global","factory","this","chart_js","helpers","Chart","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","utils","inputs","input","lines","concat","length","pop","unshift","apply","split","Array","isArray","push","isNullOrUndef","ctx","font","i","items","ilen","prev","width","string","Math","max","measureText","height","lineHeight","min","value","a0","a1","j","v","slice","updates","indexOf","splice","orient","point","origin","x0","x","y0","y","dx","dy","ln","sqrt","region","rect","res","left","right","top","bottom","compute$1","range","config","anchor","segment","clamp","area","r","x1","y1","r0","r1","clipped","vx","vy","align","PI","cos","sin","aligned","positioners","el","angle","startAngle","endAngle","innerRadius","outerRadius","rx","options","radius","ry","sx","sy","horizontal","base","abs","rasterize","round","getScaleOrigin","context","scale","chart","getDatasetMeta","datasetIndex","vScale","undefined","xCenter","yCenter","pixel","getBasePixel","drawFrame","model","bgColor","backgroundColor","borderColor","borderWidth","beginPath","w","h","HALF_PI","moveTo","arc","closePath","drawRoundedRect","borderRadius","fillStyle","fill","strokeStyle","lineWidth","lineJoin","stroke","drawTextLine","text","cfg","shadow","shadowBlur","stroked","strokeText","filled","fillText","Label","index","me","_config","_index","_model","_rects","_ctx","_el","merge","prototype","_modelize","display","toFont","resolve","color","defaults","chartArea","clip","offset","opacity","padding","toPadding","positioner","constructor","name","rotation","size","textAlign","textShadowBlur","textShadowColor","textStrokeColor","textStrokeWidth","update","label","rects","dataset","data","valueOrDefault","callback","formatter","th","tw","tx","ty","frame","boundingRects","geometry","visible","draw","center","save","globalAlpha","translate","rotate","strokeColor","strokeWidth","textGeometry","textBaseline","shadowColor","drawText","restore","MIN_INTEGER","Number","MIN_SAFE_INTEGER","MAX_INTEGER","MAX_SAFE_INTEGER","rotated","cx","cy","projected","points","axis","pt","dp","toAxis","p0","p1","HitBox","_rotation","_rect","coordinates","vs","contains","margin","intersects","other","pr0","pr1","_points","axes","layout","prepare","datasets","jlen","labels","$layout","_box","_hidable","_visible","_set","_idx","sort","a","b","sa","sb","state","dirty","proxy","Proxy","get","p","getProps","collider","s0","s1","collide","h0","h1","compute","lookup","dispatchEvent","listeners","event","$context","groups","$groups","_key","_dirty","handleMoveEvents","previous","expando","_listeners","enter","leave","type","_labels","_hovered","dispatchMoveEvents","id","family","style","weight","keys","klen","k","isObject","Object","beforeInit","_actives","beforeUpdate","_listened","_datasets","afterDatasetUpdate","args","key","isDatasetVisible","override","datalabels","configs","forEach","reduce","target","each","fn","configure","elements","meta","getDataVisibility","skip","active","dataIndex","merger","source","afterUpdate","afterDatasetsDraw","beforeEvent","handlers","click","handleClickEvents","afterEvent","actives","getActiveElements","element","render","exports","module","require","define","amd","globalThis","self","ChartDataLabels"],"mappings":"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"}