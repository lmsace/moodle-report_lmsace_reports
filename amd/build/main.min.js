/**
 * JS code which shows all fontawesome icons in a popover.
 *
 * @module     report_lmsace_reports/main
 * @copyright  2023 bdecent GmbH <https://bdecent.de>
 * @copyright  based on code from theme_boost\footer-popover by Bas Brands.
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/main",["core/chartjs","core/str","report_lmsace_reports/widgets/sitevisits","report_lmsace_reports/widgets/siteactiveusers","report_lmsace_reports/widgets/courseblocks","report_lmsace_reports/widgets/coursevisits","report_lmsace_reports/widgets/usersinfo","report_lmsace_reports/widgets/siteinfo","report_lmsace_reports/widgets/topcourseenrolment","report_lmsace_reports/widgets/topcoursecompletion","report_lmsace_reports/widgets/courseactivity","report_lmsace_reports/widgets/enrolmethod","report_lmsace_reports/widgets/userblocks","report_lmsace_reports/widgets/usermyactivities","report_lmsace_reports/widgets/usermyquizzes","report_lmsace_reports/widgets/userassignments","report_lmsace_reports/widgets/userlogins","report_lmsace_reports/widgets/cohortsinfo","report_lmsace_reports/widgets/sitestateinfo","report_lmsace_reports/chartjs-plugin-datalabels","core/notification"],(function(chartjs,Str,siteVistis,siteactiveUsers,courseBlocks,courseVisits,usersInfo,siteInfo,topcourseEnrolment,topcourseCompletion,courseactivity,enrolmethod,userBlocks,userMyactivities,userMyquizzes,userMyassignments,userLogins,cohortsInfo,sitestateInfo,chartDataLabels,Notification){var blocks={siteVistis:{func:siteVistis},courseBlocks:{func:courseBlocks},courseVisits:{func:courseVisits},usersInfo:{func:usersInfo},siteInfo:{func:siteInfo},topcourseEnrolment:{func:topcourseEnrolment},topcourseCompletion:{func:topcourseCompletion},courseactivity:{func:courseactivity},enrolmethod:{func:enrolmethod},userBlocks:{func:userBlocks},userMyactivities:{func:userMyactivities},userMyquizzes:{func:userMyquizzes},userMyassignments:{func:userMyassignments},userLogins:{func:userLogins},cohortsInfo:{func:cohortsInfo},sitestateInfo:{func:sitestateInfo}};class LMSACEReports{getStrings(){return Str.get_string("nodatatodisplay","report_lmsace_reports")}registerChartNoData(str){Chart.defaults.datasets.bar.maxBarThickness=10,Chart.register({id:"nodatatodisplay",afterRender:function(chart){if(chart.data.datasets[0].data.every((item=>0===item))){const{ctx:ctx}=chart;let width=chart.width;chart.clear(),ctx.save(),ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=".9375rem ".concat(window.getComputedStyle(document.body).fontFamily),ctx.fillText(str,width/2,50),ctx.restore()}}})}generateRandomColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}getRandomColorpattern(length){return Array.from({length:length},(()=>"c"+(Math.floor(8*Math.random())+1)))}getRandomColors(){let rcolors=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["c1"],op=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",bg=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var opacity=op||"1",colors={c1:{bo:"rgba(27, 58, 95, ".concat(opacity,")"),bg:"rgba(27, 58, 95, ".concat(opacity,")")},c2:{bo:"rgba(48, 190, 207, ".concat(opacity,")"),bg:"rgba(48, 190, 207, ".concat(opacity,")")},c3:{bo:"rgba(239, 77, 97, ".concat(opacity,")"),bg:"rgba(239, 77, 97, ".concat(opacity,")")},c4:{bo:"rgba(251, 178, 24, ".concat(opacity,")"),bg:"rgba(251, 178, 24, ".concat(opacity,")")},c5:{bo:"rgba(165, 165, 165, ".concat(opacity,")"),bg:"rgba(165, 165, 165, ".concat(opacity,")")},c6:{bo:"rgba(12, 203, 150, ".concat(opacity,")"),bg:"rgba(12, 203, 150, ".concat(opacity,")")},c7:{bo:"rgba(153, 102, 255, ".concat(opacity,")"),bg:"rgba(153, 102, 255, ".concat(opacity,")")},c8:{bo:"rgba(57, 155, 226, ".concat(opacity,")"),bg:"rgba(57, 155, 226, ".concat(opacity,")")}},method=bg?"bg":"bo",list=[];return rcolors.forEach((key=>{var _colors$key$method;key in colors?list.push(null!==(_colors$key$method=colors[key][method])&&void 0!==_colors$key$method?_colors$key$method:colors.c1):list.push(this.generateRandomColor())})),list}buildChart(ctx,type,labels,dataValue){let customConfig=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,borderColor=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,config={type:type,data:{labels:labels,datasets:[{data:dataValue,backgroundColor:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,borderColor:borderColor||"white",showTooltips:!1,fill:!0,maxBarThickness:80,datalabels:{anchor:"end",align:"line"==type||"bar"==type?"top":"center"}}]},options:{responsive:!0,maintainAspectRatio:!("line"==type),layout:{padding:20},plugins:{scales:{y:{beginAtZero:!0}},legend:{position:"top"},title:{display:!1},datalabels:{backgroundColor:function(context){return borderColor||context.dataset.backgroundColor},borderColor:"white",borderRadius:25,borderWidth:2,color:"white",display:function(ctx){return ctx.dataset.data[ctx.dataIndex]>0},font:{weight:"bold"},padding:6,formatter:Math.round}}},plugins:[chartDataLabels]};return null!==customConfig&&(config=this.merge(config,customConfig)),new Chart(ctx,config)}merge(config,customConfig){for(let key of Object.keys(customConfig))config.hasOwnProperty(key)&&"object"==typeof customConfig[key]?"object"==typeof customConfig[key]&&"object"!=typeof config[key]?config[key]=customConfig[key]:config[key]?this.merge(config[key],customConfig[key]):config[key]=customConfig[key]:config[key]=customConfig[key];return config}getMultiDatasetOptions(){return{maintainAspectRatio:!0,layout:{padding:{left:10,right:20}},plugins:{datalabels:{display:"auto",backgroundColor:function(context){return context.dataset.borderColor},padding:4,borderWidth:0}},scales:{y:{beginAtZero:!0},x:{ticks:{padding:20}}}}}}return{init:function(){var main=new LMSACEReports;main.getStrings().then((str=>(setTimeout((function(){for(let key in blocks)blocks[key].func.init(main);main.registerChartNoData(str)}),1e3),!0))).fail(Notification.exception)}}}));

//# sourceMappingURL=main.min.js.map